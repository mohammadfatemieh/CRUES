% !TEX root = ../report.tex

\chapter{Evaulation}\label{eval}
Based on the original objectives of the project (see Section~\ref{intro/
objectives}), the project can be deemed as somewhat of a success. 5 out of 6 of 
the original ``Major'' objectives have been completed, as well as 1 of 2 of 
the ``Optional'' objectives. In addition to this, it is believed that with a 
small number of additional weeks, the two remaining ``Major'' objectives could 
be completed. Given the project as a whole aimed to combine 3 engineering 
disciplines and tackle a number of complex problems simultaneously, a strong 
effort has been made. 
As detailed in various previous sections of the report, a number of small setbacks in 
various aspects of the project caused some of the latter stages of the project to be 
uncompleted. This was especially true as many of the latter elements were sequential, 
and the issues with the EKF resulted in large delays in the SLAM implementation. 

Despite these setbacks, the management of the project was effective and the  tasks were predominantly completed to schedule in the early to middle 
stages of the project. Less management of the project was required in the latter 
stages as objective related tasks became sequential, and those who weren't 
working on those tasks were assigned secondary objectives such as those 
pertaining to the trade show or the report. Git was used effectively, with the 
issues feature and protected merging used to ensure all members of the team were 
working on a task and completion of tasks could be monitored by the project 
manager. 

\todo{remove if we have no results}
A series of benchmark results have also been obtained and can be used by future 
iterations of the project to measure success. The 
objectives which have been completed were also iterated upon multiple times to 
complete for each of the robots and hence the design has 
been improved by using an iterative design process. 

\section{Mechanical}\label{eval/mech} 
Mechanical aspects of the project have been completed to a 
high standard as is demonstrated by the robustness of the robots when in 
motion and the durability and modularity of the maze. This is largely due to the 
decision to complete these tasks first with a higher priority and allow time for the 
designs to be iterated upon throughout the project. The first robot was carefully 
designed to ensure each component mechanically integrated well. This was further 
iterated upon and improved between robots, leading to a final construction which was 
consistent and reliable. Given not all objectives were met at the end of the project 
--- and the electrical and software aspects were to be the focus ---, the decision taken in the 
early stages to purchase a pre-built chassis as opposed to create a bespoke chassis 
was justified, due to the time saved. This would have added unnecessary complication 
in the beginning of the project which could have caused future 
tasks to be delayed further. 

The only issue which was encountered with the pre-built chassis was the 
accompanying motors, which were identified as the possible cause of 
issues throughout the electrical and software implementations. When used 
for a reasonable period of time, the motors began to leak grease from 
their plastic casing. This meant that the gearing system was not greased 
and resulted in gears grinding and occasionally slipping. As the 
encoders are on the motor shaft and not the drive shaft, this affected 
the feedback from the encoders. It is thought that this contributed to 
increased differences between robots at the end of the project and 
increased difficulty in tuning the PID controller. This could have been 
mitigated sooner by applying more grease, however this would have meant 
opening the casing of each motor as opposed to just two. If this issue 
had been known from the start, the motors would have been either rotated 
in testing to balance the degradation, or different motors would have 
been used with a bespoke chassis, as finding motors to fit the pre-
existing chassis would not have been a suitable solution. 

\todo{shitty motors, increased diff between robots, made PID tuning harder, in future try different motors}

Aside from the robots, the other main mechanical component was the modular maze 
testing environment. Although constructed by the mechanical workshop, a great deal of 
effort was put into the design and subsequent iterations to obtain the best outcome 
possible. The modular maze is a reusable ``SLAM playground'' and is a major 
successful outcome of the project. Although not particularly transportable, the maze 
is robust and durable and intended to last --- and be used --- for future projects.

In addition, although not used in the final maze design a great deal was learned from 
using CAD to create designs of pegs which were intended for use in the maze. A number 
of designs were created, which were not only improved in terms of the specification 
requested by the mechanical workshop, but also in terms of the use of the CAD 
software. It was also worth noting that the CAD designed pegs were not unusable 
because of a design flaw, but due to limitations in the printing/construction process. 
The mechanical portion of the project can therefore overall be deemed a success as 
the individual components were made to a high standard of design and construction. 

\section{Electrical}\label{eval/elec}
Each of the sensors and actuators of the robot have been researched fully and a 
parts list created for ease of replication. The parts chosen meet the 
specification and carry out the task required to specification. 
Each of the modules of the robot --- sensors and actuators --- has a fully 
tested and integrable ROS node associated with it. The sensors and actuators are 
also fully connected as part of the mechanical design through the PCB. 

The pre-built power distribution board chosen had several advantages over a custom built solution. Firstly, it was very easily integrated with the Polulu chassis. Secondly, it saved the significant amount of time it would have taken to build the drive circuit. Lastly, due to manufacturing restrictions on the PCB, there was very little remaining space on the systems main PCB, so using a custom build system would have required the design of a second. 

The range sensors used proved to be largely successful, with some caveats. 
During the unit testing phase, the sensors performed well, giving consistent 
readings accurate to within our required uncertainty. During the SLAM testing, 
they mostly measured accurate results, however, their limitations started to 
show. As the distance increased, the widening cone of detection cause some 
erroneous data to be measured. This is assumed to be the cause of the corners 
appearing to be rounded in the maze in Figure~\todo{reference slam diagram}. 
Another issue with using the ultrasonic sensors is that the RPi used a time 
shared OS, which meant that the readings from timing the pulse from the 
ultrasonic sensor are sometimes inexact. This could be improved with the use of 
a dedicated timing circuit. Finally, as there were several range sensors on each 
robot, taking one measurement sweep took a relatively long time. This is 
especially the case when multiple robots are synchronising their sweeps to avoid 
interference. This would have been mitigated if we had used an infra-red sensor. 
This would cost more, but it could be possible to mount the sensor on a servo 
motor, and move it through \ang{180} sweeps as to not require more than one. 
This would also remove the timing issue, as they generally return an analogue 
voltage instead of a pulse time. Initially, this design concept was discounted 
to due the additional mechanical complexities of mounting the components and 
cost, however without the time and budget restrictions, this solution would 
likely improve the systems performance. 

While using an IMU to supplement wheel odometry is a common solution, the effectiveness of the solution in this project has not been proven. The IMU returned reasonable results in testing, and the visualisation produced using IMU data when integrated with ROS shows promise. However, as the EKF is not functioning correctly, the sensor fused results are have not been obtained to measure their accuracy. 

Having multiple robots allowed an 
iterative design process to be carried out, significantly improving the outcome 
of the PCB. Connections and vias were altered following the first design to be 
more easily integrable with the mechanical layout. 

Time and care was take to ensure the electrical design of the PCB and any other 
connections between parts on the robot --- such as the ribbon cable connection 
between the PCB and the Raspberry Pi --- were robust and correct. This resulted 
in a robot which is both electrically and mechanically sound and replicable 
easily with time and parts. The robots which possess prototype parts, used in 
interim stages of the iterative design process, remain functional and usable. 
This demonstrates the careful selection and design of each of the parts. 

The use of AA batteries throughout the middle stages of the project when the PID 
controller was being tuned, resulted in a great deal of batteries being consumed. 
This was due to the high current spikes which were being caused by motor stalls and 
fewer batteries could have been used if this prolonged process had been foreseen. The 
consistent current draw of the motors throughout this phase of testing should have 
been monitored more closely and action to prevent this taken sooner.   

Overall, the electrical portion of the project was carried out effectively but did 
cause some delays which had a knock on effect later in the project. A number of 
blocking tasks in the middle stages of the project required unforeseen parts to be 
ordered such as ribbon cable and 40-pin IDC connectors which it was thought would 
be found within the department. This was not the case as 40-pin ribbon cable and 
connectors are used predominantly for Raspberry Pis, making them more expensive 
and therefore, not a common order for the department. Hence, these parts had to be ordered in and resulted in the task blocking 
others longer than expected as these were required for system testing. Towards the end of the project, a Raspberry Pi was 
shorted --- cause unknown, despite investigations --- and ceased to function, 
meaning time was lost to finding issues that were caused by the Raspberry Pi not 
being functional.    
 
\section{Software}\label{eval/soft}
The software architecture was well designed and thought-out making use of the 
libraries and tools available. By using the ROS library, the architecture was predominantly handled
and did not need to be managed further. Using the ROS library also provided 
access to other tools and libraries such as ``differential-drive'', ``robot-
localization'' and ``g-mapping''. It was thought that these libraries would be ``plug 
and play'' with the modules created as part of the Electrical sections. Despite, 
designing and implementing the Electrical modules to integrate with these libraries, 
problems were still encountered with integration. 

The libraries were far more complex than first thought and were also not designed for 
the configuration of sensors used in this project. Additional modules had to be 
created as ``adapters'' with additional parameters between the libraries and the 
originally created modules. Each of the libraries used therefore also had to be fully 
understood, at a source code level, in order to construct the ``adapters'' and alter 
the original modules. This took longer than expected, however did result in more in 
depth knowledge of each of the component parts of the software. As the libraries were 
designed for a variety of other sensors, mainly LIDAR instead of ultrasound, the 
results obtained were not of as high quality as expected and this impacted the time 
taken to tune parameters to achieve the best possible outcome. Although this was 
somewhat achieved for SLAM, this left no time in the project to convert the SLAM map 
to a world state which could then be used by an implemented AI to solve the maze 
intelligently. 


