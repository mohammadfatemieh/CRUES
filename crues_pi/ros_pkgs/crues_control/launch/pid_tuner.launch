<launch>

    <param name="robot_description" textfile="$(find differential_drive)/blinky.urdf"/>
    <rosparam command="load" file="/home/crues/crues_pi/config/params.yaml" />

    <!-- SENSORS -->
    <node name="left_encoder" pkg="crues_sensors" type="enc_node.py">
        <remap from="~rate" to="enc_rate" />
        <remap from="~pin_a" to="pins/ela" />
        <remap from="~pin_b" to="pins/elb" />
        <remap from="/wheel" to="/lwheel"/>
    </node>
    <!--<node name="right_encoder" pkg="crues_sensors" type="enc_node.py">-->
        <!--<remap from="~rate" to="enc_rate" />-->
        <!--<remap from="~pin_a" to="pins/era" />-->
        <!--<remap from="~pin_b" to="pins/erb" />-->
        <!--<remap from="/wheel" to="/rwheel" />-->
    <!--</node>-->

    <!-- ACTUATORS -->
    <node name="motor_sleep" pkg="crues_actuators" type="motor_sleep_node.py" />
    <node name="left_motor" pkg="crues_actuators" type="drive_node.py">
        <param name="range_min" type="double" value="-0.5" />
        <param name="range_max" type="double" value="0.5" />
        <remap from="~pwm_pin" to="pins/mlp" />
        <remap from="~dir_pin" to="pins/mld" />
        <remap from="/motor_cmd" to="/lmotor_cmd" />
    </node>
    <!--<node name="right_motor" pkg="crues_actuators" type="drive_node.py">-->
        <!--<param name="range_min" type="double" value="-0.5" />-->
        <!--<param name="range_max" type="double" value="0.5" />-->
        <!--<remap from="~pwm_pin" to="pins/mrp" />-->
        <!--<remap from="~dir_pin" to="pins/mrd" />-->
        <!--<remap from="/motor_cmd" to="/rmotor_cmd" />-->
    <!--</node>-->

    <!-- CONTROL -->
    <node name="lpid_velocity" pkg="differential_drive" type="pid_velocity.py">
        <param name="out_min" type="double" value="-0.5" />
        <param name="out_max" type="double" value="0.5" />
        <param name="rolling_pts" type="int" value="2" />
        <remap from="~Kp" to="pid/Kp" />
        <remap from="~Ki" to="pid/Ki" />
        <remap from="~Kd" to="pid/Kd" />
        <remap from="~rate" to="enc_rate" />
        <remap from="/wheel" to="/lwheel" />
        <remap from="/motor_cmd" to="/lmotor_cmd" />
        <remap from="/wheel_vtarget" to="/lwheel_vtarget" />
        <remap from="/wheel_vel" to="/lwheel_vel" />
    </node>
    <!--<node name="rpid_velocity" pkg="differential_drive" type="pid_velocity.py">-->
        <!--<param name="out_min" type="double" value="-0.5" />-->
        <!--<param name="out_max" type="double" value="0.5" />-->
        <!--<param name="rolling_pts" type="int" value="2" />-->
        <!--<remap from="~Kp" to="pid/Kp" />-->
        <!--<remap from="~Ki" to="pid/Ki" />-->
        <!--<remap from="~Kd" to="pid/Kd" />-->
        <!--<remap from="~rate" to="enc_rate" />-->
        <!--<remap from="/wheel" to="/rwheel" />-->
        <!--<remap from="/motor_cmd" to="/rmotor_cmd" />-->
        <!--<remap from="/wheel_vtarget" to="/rwheel_vtarget" />-->
        <!--<remap from="/wheel_vel" to="/rwheel_vel" />-->
    <!--</node>-->

</launch>